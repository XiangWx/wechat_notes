# 开发

## 接口说明

微信公众平台是运营者通过公众号为微信用户提供资讯和服务的平台，而公众平台开发接口则是提供服务的基础，开发者在公众平台网站中创建公众号、获取接口权限后，需要阅读官方提供 的接口文档来帮助开发。

## 功能说名

<p class="tip">
    公众号主要通过公众号消息会话和公众号内网页来为用户提供服务的
</p>

### 公众号消息会话
>公众号是以微信用户的一个联系人形式存在的，消息会话是公众号与用户交互的基础。目前公众号内主要有这样几类消息服务的类型，分别用于不同的场景。

1. 群发消息：公众号可以以一定频次（订阅号为每天1次，服务号为每月4次），向用户群发消息，包括文字消息、图文消息、图片、视频、语音等。

2. 被动回复消息：在用户给公众号发消息后，微信服务器会将消息发到开发者预先在开发者中心设置的服务器地址（开发者需要进行消息真实性验证），公众号可以在5秒内做出回复，可以回复一个消息，也可以回复命令告诉微信服务器这条消息暂不回复。被动回复消息可以设置加密（在公众平台官网的开发者中心处设置，设置后，按照消息加解密文档来进行处理。其他3种消息的调用因为是API调用而不是对请求的返回，所以不需要加解密）。

3. 客服消息：在用户给公众号发消息后的48小时内，公众号可以给用户发送不限数量的消息，主要用于客服场景。用户的行为会触发事件推送，某些事件推送是支持公众号据此发送客服消息的，详见微信推送消息与事件说明文档。

4. 模板消息：在需要对用户发送服务通知（如刷卡提醒、服务预约成功通知等）时，公众号可以用特定内容模板，主动向用户发送消息。

### 公众号内网页

>许多复杂的业务场景，需要通过网页形式来提供服务，这时需要用到：

1）网页授权获取用户基本信息：通过该接口，可以获取用户的基本信息（获取用户的OpenID是无需用户同意的，获取用户的基本信息则需用户同意）

2）微信JS-SDK：是开发者在网页上通过JavaScript代码使用微信原生功能的工具包，开发者可以使用它在网页上录制和播放微信语音、监听微信分享、上传手机本地图片、拍照等许多能力。

<p class="tip">为了识别用户，每个用户针对每个公众号会产生一个安全的OpenID，如果需要在多公众号、移动应用之间做用户共通，则需前往微信开放平台，将这些公众号和应用绑定到一个开放平台账号下，绑定后，一个用户虽然对多个公众号和应用有多个不同的OpenID，但他对所有这些同一开放平台账号下的公众号和应用，只有一个UnionID，可以在用户管理-获取用户基本信息（UnionID机制）文档了解详情。</p>

### 公众号接口权限

|接口名称|未认证订阅号|微信认证订阅号|未认证服务号|微信认证服务号|
|--|--|--|--|
|基础支持-获取access_token|有|有|有|有|
|基础支持-获取微信服务器IP地址|有|有|有|有|
|接收消息-验证消息真实性、接收普通消息、接收事件推送、接收语音识别结果|有|有|有|有|
|发送消息-被动回复消息|有|有|有|有|
|发送消息-客服接口||有||有
|发送消息-群发接口||有||有
|发送消息-模板消息接口（发送业务通知）||||有
|发送消息-一次性订阅消息接口||有||有
|用户管理-用户分组管理||有||有
|用户管理-设置用户备注名||有||有
|用户管理-获取用户基本信息||有||有
|用户管理-获取用户列表||有||有
|用户管理-获取用户地理位置||||有
|用户管理-网页授权获取用户openid/用户基本信息||||有
|推广支持-生成带参数二维码||||有
|推广支持-长链接转短链接口||||有
|界面丰富-自定义菜单||有|有|有
|素材管理-素材管理接口||有||有
|智能接口-语义理解接口||||有
|多客服-获取多客服消息记录、客服管理||||有
|微信支付接口||||需申请
|微信小店接口||||需申请
|微信卡券接口||需申请||需申请
|微信设备功能接口||||需申请
|微信发票接口||有||有
|微信JS-SDK-基础接口|有|有|有|有
|微信JS-SDK-分享接口||有||有
|微信JS-SDK-图像接口|有|有|有|有
|微信JS-SDK-音频接口|有|有|有|有
|微信JS-SDK-智能接口（网页语音识别）|有|有|有|有
|微信JS-SDK-设备信息|有|有|有|有
|微信JS-SDK-地理位置|有|有|有|有
|微信JS-SDK-界面操作|有|有|有|有
|微信JS-SDK-微信扫一扫|有|有|有|有
|微信JS-SDK-微信小店||||有
|微信JS-SDK-微信卡券||有||有
|微信JS-SDK-微信支付||||有